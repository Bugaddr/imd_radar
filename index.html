<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nagpur Weather Radar & Satellite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .card {
            transition: all 0.2s ease;
            will-change: transform, box-shadow; /* Optimization for animations */
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .card img {
            transition: opacity 0.2s;
        }

        .card:hover img {
            opacity: 0.95;
        }

        /* Modal Image Zoom and Pan */
        #modalImageContainer {
            overflow: hidden;
            flex-grow: 1;
            position: relative;
            background: #f9fafb;
            cursor: zoom-in;
        }

        #modalImageContainer.zoomed {
            cursor: crosshair;
            overflow: hidden; /* Changed from auto to hidden for smooth mouse pan */
        }

        #modalImage {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            display: block;
            margin: auto;
            object-fit: contain;
            transition: transform 0.2s ease;
            pointer-events: none; /* Prevent image from capturing mouse events */
            will-change: transform; /* Optimization for panning */
        }

        #modalImageContainer.zoomed #modalImage {
            max-width: none;
            max-height: none;
            cursor: crosshair;
            /* Use a very fast, linear transition for panning to feel instantaneous */
            transition: transform 0.05s linear;
        }

        /* Smooth scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-900">

    <div class="min-h-screen px-4 py-6 md:px-6 lg:px-8">
        <!-- Header -->
        <header class="max-w-7xl mx-auto mb-8">
            <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-200">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900 mb-1">IMD Weather Radar & Satellite</h1>
                        <p class="text-gray-600">Nagpur Region - Live Data</p>
                    </div>
                    <div class="flex flex-col items-start md:items-end gap-2">
                        <div class="flex items-center gap-2">
                            <span class="flex h-2 w-2 relative">
                                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                                <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                            </span>
                            <span class="text-sm font-medium text-green-600">Live</span>
                        </div>
                        <p id="timestamp" class="text-sm text-gray-500"></p>
                        <button onclick="location.reload()" 
                            class="text-sm px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            Refresh
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto">
            <!-- Radar Section -->
            <section class="mb-10">
                <h2 class="text-xl font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-300">Doppler Weather Radar</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                    
                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Your best all-in-one view. See exactly where it's raining around Nagpur right now and how heavy it is. Yellows and reds mean heavier rain, perfect for checking if that dark cloud overhead is going to be a downpour.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Combined Azimuth Range (CAZ)</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/caz_ngp.gif" alt="CAZ" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Plan Position Indicator (PPI): This is a classic top-down 'radar sweep' of Nagpur, showing precipitation detected at a single, fixed angle of the radar dish. It provides a clear snapshot of a storm's location and structure at that specific altitude, helping forecasters analyze its features.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Plan Position Indicator (PPI)</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/ppi_ngp.gif" alt="PPI" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="How hard is it raining? This shows the rainfall rate in mm/hr on the ground. Use this to judge if you're facing a light shower or a heavy spell that could lead to waterlogging on city roads.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Surface Rainfall Intensity (SRI)</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/sri_ngp.gif" alt="SRI" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Measures the 'thickness' of the rain. Bright colors mean bigger raindrops or even hail. A key tool for identifying the most intense and potentially damaging parts of a storm over the Nagpur region.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Reflectivity (PPZ)</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/ppz_ngp.gif" alt="PPZ" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="How much rain has fallen? This tracks the total rainfall over the last 24 hours. Vital for farmers and for monitoring river levels and potential flooding risk after a period of heavy rain.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Precipitation Accumulation (PAC)</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/pac_ngp.gif" alt="PAC" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Doppler Velocity (PPV): This map shows the speed and direction of the rain relative to the Nagpur radar. Green colors indicate particles moving *towards* the radar, while red shows them moving *away*. A tight pairing of bright green and red can signify rotation, a key indicator for issuing severe storm and tornado warnings.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Doppler Velocity (PPV)</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/ppv_ngp.gif" alt="PPV" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="A 3D wind map of the storm. This advanced view lets meteorologists analyze the entire wind structure, essential for issuing precise warnings about severe weather events like damaging winds.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Volume-Velocity Processing (VP2)</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/vp2_ngp.gif" alt="VP2" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Watch the rain move in real-time. This loop shows the path and development of rain over the last few hours. See if the rain is heading towards your location in Nagpur or moving away.">
                        <div class="p-3 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <h3 class="text-sm font-semibold text-gray-800">Surface Rainfall (Animated)</h3>
                                <span class="px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded">GIF</span>
                            </div>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/animation/Converted/NGP_SRI.gif" alt="SRI Animated" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Tracks the storm's powerhouse. This animation follows the most intense core of the storm, showing where the heaviest rain or hail is and how its strength is changing over time.">
                        <div class="p-3 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <h3 class="text-sm font-semibold text-gray-800">Max Reflectivity (Animated)</h3>
                                <span class="px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded">GIF</span>
                            </div>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Radar/animation/Converted/NGP_MAXZ.gif" alt="MAXZ Animated" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                </div>
            </section>

            <!-- Satellite Section -->
            <section class="mb-10">
                <h2 class="text-xl font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-300">Satellite Imagery</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                    
                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="See clouds day and night. This measures cloud top temperature. The bright white and colored tops over Central India represent taller, colder clouds, often associated with powerful afternoon thunderstorms.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Asia Sector - Infrared</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/3Dasiasec_ir1.jpg" alt="Asia IR1" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="A real-life photo from space. This shows you exactly what the cloud cover over Nagpur and the surrounding region looks like right now. Perfect for seeing the texture and spread of daytime clouds.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Asia Sector - Visible</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/3Dasiasec_vis.jpg" alt="Asia VIS" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="The atmosphere's moisture map. Bright white areas show deep moisture, the fuel for thunderstorms. Dark areas are dry air. Use this to see if more moisture is flowing into the region, potentially fueling more rain.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Asia Sector - Water Vapour</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/3Dasiasec_wv.jpg" alt="Asia WV" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Pinpoints the strongest storms. This highlights the coldest (and therefore highest) cloud tops with vibrant colors. A rapid cooling seen here is a strong signal that a thunderstorm is intensifying.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Asia Sector - CTBT</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/3Dasiasec_ctbt.jpg" alt="Asia CTBT" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="The big picture. Track large-scale weather systems like monsoon depressions or cyclonic circulations across the globe. See how international weather patterns might affect India in the coming days.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Global - Infrared</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/3Dglobe_ir1.jpg" alt="Globe IR1" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="A daytime snapshot of Earth. Watch the sunrise and sunset across the globe and see a true-color view of major weather systems affecting different continents.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Global - Visible</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/3Dglobe_vis.jpg" alt="Globe VIS" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Follow the atmospheric rivers. This global view tracks moisture flows across the planet, showing the large-scale patterns that influence the Indian monsoon and other major weather events.">
                        <div class="p-3 border-b border-gray-100">
                            <h3 class="text-sm font-semibold text-gray-800">Global - Water Vapour</h3>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/3Dglobe_wv.jpg" alt="Globe WV" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="See the weather system's life cycle. This loop shows clouds and storms developing and moving over the past few hours. Track the progression of large cloud masses across the Indian subcontinent.">
                        <div class="p-3 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <h3 class="text-sm font-semibold text-gray-800">Infrared (Animated)</h3>
                                <span class="px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded">GIF</span>
                            </div>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/Converted/IR1.gif" alt="IR1 Animated" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Watch the afternoon clouds build. This daytime loop is perfect for seeing cumulus clouds bubble up into thunderstorms, or for watching fog burn off in the morning across the region.">
                        <div class="p-3 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <h3 class="text-sm font-semibold text-gray-800">Visible (Animated)</h3>
                                <span class="px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded">GIF</span>
                            </div>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/Converted/VIS.gif" alt="VIS Animated" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="See the moisture flow. This animation reveals the movement of atmospheric moisture, showing how the 'fuel' for rain and storms is being transported over Central India.">
                        <div class="p-3 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <h3 class="text-sm font-semibold text-gray-800">Water Vapour (Animated)</h3>
                                <span class="px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded">GIF</span>
                            </div>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/Converted/WV.gif" alt="WV Animated" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                    <div class="card bg-white rounded-lg shadow-sm overflow-hidden border border-gray-200 cursor-pointer"
                        title="Track storm intensity over time. This loop is critical for seeing which storms are growing stronger (indicated by cooling tops) and which are weakening, helping to forecast severe weather threats.">
                        <div class="p-3 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <h3 class="text-sm font-semibold text-gray-800">CTBT (Animated)</h3>
                                <span class="px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded">GIF</span>
                            </div>
                        </div>
                        <div class="bg-gray-100">
                            <img src="https://mausam.imd.gov.in/Satellite/Converted/CTBT.gif" alt="CTBT Animated" class="w-full h-auto" loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/500x500/f3f4f6/9ca3af?text=Image+Not+Available';">
                        </div>
                    </div>

                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="max-w-7xl mx-auto mt-8 mb-6">
            <div class="bg-white rounded-lg shadow-sm p-4 border border-gray-200 text-center">
                <p class="text-sm text-gray-600">Data Source: 
                    <a href="https://mausam.imd.gov.in/" target="_blank" class="text-blue-600 hover:text-blue-700 font-medium underline">
                        India Meteorological Department (IMD)
                    </a>
                </p>
            </div>
        </footer>
    </div>

    <!-- Modal -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50 p-4">
        <div class="relative bg-white rounded-lg w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl">
            <!-- Header -->
            <div id="modalHeader" class="flex justify-between items-start p-4 border-b border-gray-200 flex-shrink-0">
                <div class="flex-1">
                    <h3 id="modalTitle" class="text-lg font-semibold text-gray-900"></h3>
                </div>
                <button id="closeModal" class="ml-4 text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Image Container -->
            <div id="modalImageContainer" class="flex-1 flex items-center justify-center p-4">
                <img id="modalImage" src="" alt="Full-size image">
                <div id="zoomHint" class="absolute top-4 right-4 bg-black bg-opacity-70 text-white px-3 py-2 rounded-md text-sm flex items-center gap-2 pointer-events-none">
                    <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7" />
                    </svg>
                    Click to zoom
                </div>
            </div>

            <!-- Footer -->
            <div id="modalFooter" class="p-4 border-t border-gray-200 flex-shrink-0">
                <p id="modalDescription" class="text-sm text-gray-600"></p>
            </div>

            <!-- Navigation -->
            <button id="prevButton"
                class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 bg-white rounded-full p-3 shadow-lg hover:bg-gray-50 transition-colors">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            <button id="nextButton"
                class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/2 bg-white rounded-full p-3 shadow-lg hover:bg-gray-50 transition-colors">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Element Selection ---
            const mainContent = document.querySelector('main');
            const imageModal = document.getElementById('imageModal');
            const modalImageContainer = document.getElementById('modalImageContainer');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalDescription = document.getElementById('modalDescription');
            const closeModal = document.getElementById('closeModal');
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            const zoomHint = document.getElementById('zoomHint');
            const modalHeader = document.getElementById('modalHeader');
            const modalFooter = document.getElementById('modalFooter');
            const timestampEl = document.getElementById('timestamp');
            
            // --- State Variables ---
            let imagesData = [];
            let currentIndex = 0;
            let isZoomed = false;
            let imageFitWidth = 0;
            let imageFitHeight = 0;
            const zoomLevel = 2;
            const imageCards = Array.from(document.querySelectorAll('main .card')); // Convert NodeList to Array for indexOf

            // --- Function Definitions ---

            /**
             * Collects image data from the DOM and stores it in an array.
             */
            const collectImageData = () => {
                imagesData = imageCards.map(card => {
                    const img = card.querySelector('img');
                    const title = card.querySelector('h3').innerText;
                    const description = card.getAttribute('title');
                    return { src: img.src, title, description };
                });
            };

            /**
             * Updates the modal's content based on the current index.
             */
            const updateModalContent = () => {
                const data = imagesData[currentIndex];
                modalImage.src = data.src;
                modalTitle.textContent = data.title;
                modalDescription.textContent = data.description;

                // Reset zoom and UI visibility for the new image
                isZoomed = false;
                modalImageContainer.classList.remove('zoomed');
                modalImage.style.transform = '';
                zoomHint.style.display = 'flex';
                modalHeader.classList.remove('hidden');
                modalFooter.classList.remove('hidden');
                
                // Toggle navigation button visibility
                prevButton.style.display = currentIndex === 0 ? 'none' : 'block';
                nextButton.style.display = currentIndex === imagesData.length - 1 ? 'none' : 'block';
            };
            
            /**
             * Opens and displays the image modal.
             */
            const openModal = () => {
                updateModalContent();
                imageModal.classList.remove('hidden');
                imageModal.classList.add('flex');
            };

            /**
             * Hides and resets the image modal.
             */
            const hideModal = () => {
                imageModal.classList.add('hidden');
                imageModal.classList.remove('flex');
                modalImage.src = ''; // Clear src to stop loading/animation
            };

            /**
             * Toggles the zoom state of the modal image.
             * @param {MouseEvent} e - The click event object.
             */
            const toggleZoom = (e) => {
                isZoomed = !isZoomed;
                modalImageContainer.classList.toggle('zoomed');
                zoomHint.style.display = isZoomed ? 'none' : 'flex';
                modalHeader.classList.toggle('hidden', isZoomed);
                modalFooter.classList.toggle('hidden', isZoomed);

                if (isZoomed) {
                    // Store the image's dimensions before zooming
                    imageFitWidth = modalImage.offsetWidth;
                    imageFitHeight = modalImage.offsetHeight;
                    panImage(e); // Pan to the clicked point immediately
                } else {
                    modalImage.style.transform = ''; // Reset transform on zoom out
                }
            };
            
            /**
             * Pans the image inside the container based on mouse position.
             * @param {MouseEvent} e - The mouse event object.
             */
            const panImage = (e) => {
                if (!isZoomed) return;

                const containerRect = modalImageContainer.getBoundingClientRect();
                const panPadding = 40; // The amount of "overscroll" in pixels
                
                const zoomedWidth = imageFitWidth * zoomLevel;
                const zoomedHeight = imageFitHeight * zoomLevel;
                
                // Calculate how much the zoomed image overflows the container
                const overflowX = Math.max(0, zoomedWidth - containerRect.width);
                const overflowY = Math.max(0, zoomedHeight - containerRect.height);

                // Get mouse position relative to the container
                const mouseX = e.clientX - containerRect.left;
                const mouseY = e.clientY - containerRect.top;

                // Calculate the mouse position as a percentage of the container's dimensions.
                const xPercent = Math.max(0, Math.min(1, mouseX / containerRect.width));
                const yPercent = Math.max(0, Math.min(1, mouseY / containerRect.height));
                
                // Calculate the required translation, adding padding to create an "overscroll" effect.
                const panX = -(xPercent - 0.5) * (overflowX + panPadding * 2);
                const panY = -(yPercent - 0.5) * (overflowY + panPadding * 2);
                
                // Apply the transform. The translation is applied directly in screen pixels after the scaling.
                modalImage.style.transform = `scale(${zoomLevel}) translate(${panX}px, ${panY}px)`;
            };

            /**
             * Updates the timestamp in the header.
             */
            const updateTimestamp = () => {
                const now = new Date();
                const options = {
                    year: 'numeric', month: 'short', day: 'numeric',
                    hour: '2-digit', minute: '2-digit',
                    timeZone: 'Asia/Kolkata', hour12: true
                };
                timestampEl.textContent = new Intl.DateTimeFormat('en-IN', options).format(now) + ' IST';
            };

            /**
             * Navigates to the next or previous image.
             * @param {number} direction - 1 for next, -1 for previous.
             */
            const navigate = (direction) => {
                const newIndex = currentIndex + direction;
                if (newIndex >= 0 && newIndex < imagesData.length) {
                    currentIndex = newIndex;
                    updateModalContent();
                }
            };

            // --- Event Listeners ---

            // Use event delegation for image card clicks for better performance
            mainContent.addEventListener('click', (e) => {
                const card = e.target.closest('.card');
                if (card) {
                    const index = imageCards.indexOf(card);
                    if (index > -1) {
                        currentIndex = index;
                        openModal();
                    }
                }
            });

            modalImageContainer.addEventListener('click', (e) => {
                if (e.target === modalImageContainer) toggleZoom(e);
            });
            
            modalImageContainer.addEventListener('mousemove', panImage);

            closeModal.addEventListener('click', hideModal);
            imageModal.addEventListener('click', (e) => {
                if (e.target === imageModal) hideModal();
            });

            prevButton.addEventListener('click', (e) => {
                e.stopPropagation();
                navigate(-1);
            });

            nextButton.addEventListener('click', (e) => {
                e.stopPropagation();
                navigate(1);
            });

            document.addEventListener('keydown', (e) => {
                if (imageModal.classList.contains('hidden')) return;
                
                if (e.key === 'Escape') hideModal();
                if (e.key === 'ArrowLeft') navigate(-1);
                if (e.key === 'ArrowRight') navigate(1);
            });
            
            // --- Initialization ---
            collectImageData();
            updateTimestamp();
            setInterval(updateTimestamp, 60000); // Update timestamp every minute
        });
    </script>
</body>

</html>

